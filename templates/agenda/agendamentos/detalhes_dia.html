{% extends 'base.html' %}
{% block title %}Agendamentos - {{ sala.nome }}{% endblock %}

{% block content %}
<h4 class="mt-4">Hor치rios sugeridos</h4>
<div class="row row-cols-2 row-cols-md-4 g-3">
  {% for b in blocos %}
    <div class="col">
      {% if b.passado %}
        <div class="btn btn-secondary w-100 disabled">
          {{ b.inicio }} - {{ b.fim }}<br><small>Passado</small>
        </div>
      {% elif b.ocupado %}
        <div class="btn btn-danger w-100 disabled">
          {{ b.inicio }} - {{ b.fim }}<br><small>Ocupado</small>
        </div>
      {% else %}
        <a class="btn btn-outline-success w-100"
           href="{% url 'agenda:novo_agendamento' %}?sala={{ sala.id }}&data={{ data|date:'Y-m-d' }}&hora_inicio={{ b.inicio }}&hora_fim={{ b.fim }}">
          {{ b.inicio }} - {{ b.fim }}<br><small>Agendar</small>
        </a>
      {% endif %}
    </div>
  {% endfor %}
</div>

<h2>Agendamentos em {{ data|date:'d/m/Y' }} - {{ sala.nome }}</h2>

<div class="d-flex justify-content-between mb-3">
  <a href="{% url 'agenda:calendario_sala' sala.id %}" class="btn btn-secondary">Voltar ao calend치rio</a>
  <a href="{% url 'agenda:novo_agendamento' %}?sala={{ sala.id }}&data={{ data|date:'Y-m-d' }}&hora_inicio=14:00&hora_fim=15:00" class="btn btn-success">
    Novo Agendamento
  </a>
</div>

{% if agendamentos %}
  <table class="table table-striped">
    <thead>
      <tr><th>Hor치rio</th><th>Respons치vel</th></tr>
    </thead>
    <tbody>
      {% for ag in agendamentos %}
        <tr class="{% if ag.esta_no_passado %}text-muted{% endif %}">
          <td>{{ ag.obj.hora_inicio }} - {{ ag.obj.hora_fim }}</td>
          <td>{{ ag.obj.criador.get_full_name }}</td>
        </tr>
      {% endfor %}
    </tbody>

  </table>
{% else %}
  <div class="alert alert-info">Nenhum agendamento para esta data.</div>
{% endif %}
{% endblock %}
